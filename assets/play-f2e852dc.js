var Os=Object.defineProperty;var Rs=(n,e,s)=>e in n?Os(n,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):n[e]=s;var z=(n,e,s)=>(Rs(n,typeof e!="symbol"?e+"":e,s),s);import{_ as Es}from"./nmCard-874540a7.js";import{S as ke,D as q,E as re,T as Bs,G as Ze,H as G,I as P,J as Nt,K as we,M as Ms,L as st,N as $s,O as F,P as L,U as Tt,V as Fs,W,X as As,Y as Ls,Z as Ps,_ as nt,$ as Se,a0 as Ne,a1 as Ce,a2 as Vt,a3 as qe,a4 as zt,a5 as at,a6 as I,a7 as Ns,a8 as be,a9 as Vs,aa as zs,ab as Ue,ac as Is,ad as js,ae as Gs,e as ot,o as ne,f as Te,w as M,i as R,Q as It,q as ie,x as De,l as rt,af as Qs,p as A,ag as it,m as Oe,j as xe,ah as jt,c as Ve,a as c,h as B,ai as Gt,u as Qt,aj as Xs,g as lt,d as Xt,ak as Ys,al as ut,am as Zs,an as Us,ao as te,ap as Ws,aq as Ks,ar as ye,as as We,at as Dt,au as Ke,av as Re,aw as Je,ax as Yt,ay as Js,az as Q,aA as Hs,aB as He,aC as en,aD as tn,aE as sn,aF as nn,aG as an,aH as on,aI as rn,aJ as ln,aK as un,aL as cn,aM as hn,aN as pn,aO as de,aP as fe,aQ as U,aR as ae,aS as E,aT as ct,aU as Zt,aV as Ut,aW as Wt,aX as V,aY as dn,aZ as fn,s as mn,a_ as gn,k as Ot,n as _n,r as vn,F as yn,a$ as bn,b0 as xn}from"./index-9c1a3be2.js";import{u as kn,a as wn}from"./index-94463773.js";import{a as ze,u as Sn,b as Cn}from"./bbPrograms-4b937294.js";import{_ as qn}from"./_plugin-vue_export-helper-c27b6911.js";class H extends ke{constructor(){super(q(H.getDefaults(),arguments,["type"])),this.name="Noise",this._source=null;const e=q(H.getDefaults(),arguments,["type"]);this._playbackRate=e.playbackRate,this.type=e.type,this._fadeIn=e.fadeIn,this._fadeOut=e.fadeOut}static getDefaults(){return Object.assign(ke.getDefaults(),{fadeIn:0,fadeOut:0,playbackRate:1,type:"white"})}get type(){return this._type}set type(e){if(re(e in Rt,"Noise: invalid type: "+e),this._type!==e&&(this._type=e,this.state==="started")){const s=this.now();this._stop(s),this._start(s)}}get playbackRate(){return this._playbackRate}set playbackRate(e){this._playbackRate=e,this._source&&(this._source.playbackRate.value=e)}_start(e){const s=Rt[this._type];this._source=new Bs({url:s,context:this.context,fadeIn:this._fadeIn,fadeOut:this._fadeOut,loop:!0,onended:()=>this.onstop(this),playbackRate:this._playbackRate}).connect(this.output),this._source.start(this.toSeconds(e),Math.random()*(s.duration-.001))}_stop(e){this._source&&(this._source.stop(this.toSeconds(e)),this._source=null)}get fadeIn(){return this._fadeIn}set fadeIn(e){this._fadeIn=e,this._source&&(this._source.fadeIn=this._fadeIn)}get fadeOut(){return this._fadeOut}set fadeOut(e){this._fadeOut=e,this._source&&(this._source.fadeOut=this._fadeOut)}_restart(e){this._stop(e),this._start(e)}dispose(){return super.dispose(),this._source&&this._source.disconnect(),this}}const K=44100*5,et=2,X={brown:null,pink:null,white:null},Rt={get brown(){if(!X.brown){const n=[];for(let e=0;e<et;e++){const s=new Float32Array(K);n[e]=s;let i=0;for(let t=0;t<K;t++){const a=Math.random()*2-1;s[t]=(i+.02*a)/1.02,i=s[t],s[t]*=3.5}}X.brown=new Ze().fromArray(n)}return X.brown},get pink(){if(!X.pink){const n=[];for(let e=0;e<et;e++){const s=new Float32Array(K);n[e]=s;let i,t,a,o,u,l,p;i=t=a=o=u=l=p=0;for(let h=0;h<K;h++){const d=Math.random()*2-1;i=.99886*i+d*.0555179,t=.99332*t+d*.0750759,a=.969*a+d*.153852,o=.8665*o+d*.3104856,u=.55*u+d*.5329522,l=-.7616*l-d*.016898,s[h]=i+t+a+o+u+l+p+d*.5362,s[h]*=.11,p=d*.115926}}X.pink=new Ze().fromArray(n)}return X.pink},get white(){if(!X.white){const n=[];for(let e=0;e<et;e++){const s=new Float32Array(K);n[e]=s;for(let i=0;i<K;i++)s[i]=Math.random()*2-1}X.white=new Ze().fromArray(n)}return X.white}};class me extends G{constructor(){super(Object.assign(q(me.getDefaults(),arguments,["value"]))),this.override=!1,this.name="Add",this._sum=new P({context:this.context}),this.input=this._sum,this.output=this._sum,this.addend=this._param,Nt(this._constantSource,this._sum)}static getDefaults(){return Object.assign(G.getDefaults(),{value:0})}dispose(){return super.dispose(),this._sum.dispose(),this}}class Ee extends we{constructor(){super(Object.assign(q(Ee.getDefaults(),arguments,["min","max"]))),this.name="Scale";const e=q(Ee.getDefaults(),arguments,["min","max"]);this._mult=this.input=new Ms({context:this.context,value:e.max-e.min}),this._add=this.output=new me({context:this.context,value:e.min}),this._min=e.min,this._max=e.max,this.input.connect(this.output)}static getDefaults(){return Object.assign(we.getDefaults(),{max:1,min:0})}get min(){return this._min}set min(e){this._min=e,this._setRange()}get max(){return this._max}set max(e){this._max=e,this._setRange()}_setRange(){this._add.value=this._min,this._mult.value=this._max-this._min}dispose(){return super.dispose(),this._add.dispose(),this._mult.dispose(),this}}class ht extends we{constructor(){super(Object.assign(q(ht.getDefaults(),arguments))),this.name="Zero",this._gain=new P({context:this.context}),this.output=this._gain,this.input=void 0,st(this.context.getConstant(0),this._gain)}dispose(){return super.dispose(),$s(this.context.getConstant(0),this._gain),this}}class Be extends F{constructor(){super(q(Be.getDefaults(),arguments,["frequency","min","max"])),this.name="LFO",this._stoppedValue=0,this._units="number",this.convert=!0,this._fromType=L.prototype._fromType,this._toType=L.prototype._toType,this._is=L.prototype._is,this._clampValue=L.prototype._clampValue;const e=q(Be.getDefaults(),arguments,["frequency","min","max"]);this._oscillator=new Tt(e),this.frequency=this._oscillator.frequency,this._amplitudeGain=new P({context:this.context,gain:e.amplitude,units:"normalRange"}),this.amplitude=this._amplitudeGain.gain,this._stoppedSignal=new G({context:this.context,units:"audioRange",value:0}),this._zeros=new ht({context:this.context}),this._a2g=new Fs({context:this.context}),this._scaler=this.output=new Ee({context:this.context,max:e.max,min:e.min}),this.units=e.units,this.min=e.min,this.max=e.max,this._oscillator.chain(this._amplitudeGain,this._a2g,this._scaler),this._zeros.connect(this._a2g),this._stoppedSignal.connect(this._a2g),W(this,["amplitude","frequency"]),this.phase=e.phase}static getDefaults(){return Object.assign(Tt.getDefaults(),{amplitude:1,frequency:"4n",max:1,min:0,type:"sine",units:"number"})}start(e){return e=this.toSeconds(e),this._stoppedSignal.setValueAtTime(0,e),this._oscillator.start(e),this}stop(e){return e=this.toSeconds(e),this._stoppedSignal.setValueAtTime(this._stoppedValue,e),this._oscillator.stop(e),this}sync(){return this._oscillator.sync(),this._oscillator.syncFrequency(),this}unsync(){return this._oscillator.unsync(),this._oscillator.unsyncFrequency(),this}_setStoppedValue(){this._stoppedValue=this._oscillator.getInitialValue(),this._stoppedSignal.value=this._stoppedValue}get min(){return this._toType(this._scaler.min)}set min(e){e=this._fromType(e),this._scaler.min=e}get max(){return this._toType(this._scaler.max)}set max(e){e=this._fromType(e),this._scaler.max=e}get type(){return this._oscillator.type}set type(e){this._oscillator.type=e,this._setStoppedValue()}get partials(){return this._oscillator.partials}set partials(e){this._oscillator.partials=e,this._setStoppedValue()}get phase(){return this._oscillator.phase}set phase(e){this._oscillator.phase=e,this._setStoppedValue()}get units(){return this._units}set units(e){const s=this.min,i=this.max;this._units=e,this.min=s,this.max=i}get state(){return this._oscillator.state}connect(e,s,i){return(e instanceof L||e instanceof G)&&(this.convert=e.convert,this.units=e.units),As(this,e,s,i),this}dispose(){return super.dispose(),this._oscillator.dispose(),this._stoppedSignal.dispose(),this._zeros.dispose(),this._scaler.dispose(),this._a2g.dispose(),this._amplitudeGain.dispose(),this.amplitude.dispose(),this}}class Tn extends we{constructor(){super(...arguments),this.name="GainToAudio",this._norm=new Ls({context:this.context,mapping:e=>Math.abs(e)*2-1}),this.input=this._norm,this.output=this._norm}dispose(){return super.dispose(),this._norm.dispose(),this}}class le extends F{constructor(){super(q(le.getDefaults(),arguments,["frequency","type"])),this.name="BiquadFilter";const e=q(le.getDefaults(),arguments,["frequency","type"]);this._filter=this.context.createBiquadFilter(),this.input=this.output=this._filter,this.Q=new L({context:this.context,units:"number",value:e.Q,param:this._filter.Q}),this.frequency=new L({context:this.context,units:"frequency",value:e.frequency,param:this._filter.frequency}),this.detune=new L({context:this.context,units:"cents",value:e.detune,param:this._filter.detune}),this.gain=new L({context:this.context,units:"decibels",convert:!1,value:e.gain,param:this._filter.gain}),this.type=e.type}static getDefaults(){return Object.assign(F.getDefaults(),{Q:1,type:"lowpass",frequency:350,detune:0,gain:0})}get type(){return this._filter.type}set type(e){re(["lowpass","highpass","bandpass","lowshelf","highshelf","notch","allpass","peaking"].indexOf(e)!==-1,`Invalid filter type: ${e}`),this._filter.type=e}getFrequencyResponse(e=128){const s=new Float32Array(e);for(let o=0;o<e;o++){const l=Math.pow(o/e,2)*(2e4-20)+20;s[o]=l}const i=new Float32Array(e),t=new Float32Array(e),a=this.context.createBiquadFilter();return a.type=this.type,a.Q.value=this.Q.value,a.frequency.value=this.frequency.value,a.gain.value=this.gain.value,a.getFrequencyResponse(s,i,t),i}dispose(){return super.dispose(),this._filter.disconnect(),this.Q.dispose(),this.frequency.dispose(),this.gain.dispose(),this.detune.dispose(),this}}class ue extends F{constructor(){super(q(ue.getDefaults(),arguments,["frequency","type","rolloff"])),this.name="Filter",this.input=new P({context:this.context}),this.output=new P({context:this.context}),this._filters=[];const e=q(ue.getDefaults(),arguments,["frequency","type","rolloff"]);this._filters=[],this.Q=new G({context:this.context,units:"positive",value:e.Q}),this.frequency=new G({context:this.context,units:"frequency",value:e.frequency}),this.detune=new G({context:this.context,units:"cents",value:e.detune}),this.gain=new G({context:this.context,units:"decibels",convert:!1,value:e.gain}),this._type=e.type,this.rolloff=e.rolloff,W(this,["detune","frequency","gain","Q"])}static getDefaults(){return Object.assign(F.getDefaults(),{Q:1,detune:0,frequency:350,gain:0,rolloff:-12,type:"lowpass"})}get type(){return this._type}set type(e){re(["lowpass","highpass","bandpass","lowshelf","highshelf","notch","allpass","peaking"].indexOf(e)!==-1,`Invalid filter type: ${e}`),this._type=e,this._filters.forEach(i=>i.type=e)}get rolloff(){return this._rolloff}set rolloff(e){const s=nt(e)?e:parseInt(e,10),i=[-12,-24,-48,-96];let t=i.indexOf(s);re(t!==-1,`rolloff can only be ${i.join(", ")}`),t+=1,this._rolloff=s,this.input.disconnect(),this._filters.forEach(a=>a.disconnect()),this._filters=new Array(t);for(let a=0;a<t;a++){const o=new le({context:this.context});o.type=this._type,this.frequency.connect(o.frequency),this.detune.connect(o.detune),this.Q.connect(o.Q),this.gain.connect(o.gain),this._filters[a]=o}this._internalChannels=this._filters,Nt(this.input,...this._internalChannels,this.output)}getFrequencyResponse(e=128){const s=new le({frequency:this.frequency.value,gain:this.gain.value,Q:this.Q.value,type:this._type,detune:this.detune.value}),i=new Float32Array(e).map(()=>1);return this._filters.forEach(()=>{s.getFrequencyResponse(e).forEach((a,o)=>i[o]*=a)}),s.dispose(),i}dispose(){return super.dispose(),this._filters.forEach(e=>{e.dispose()}),Ps(this,["detune","frequency","gain","Q"]),this.frequency.dispose(),this.Q.dispose(),this.detune.dispose(),this.gain.dispose(),this}}class Me extends Se{constructor(){super(q(Me.getDefaults(),arguments)),this.name="NoiseSynth";const e=q(Me.getDefaults(),arguments);this.noise=new H(Object.assign({context:this.context},e.noise)),this.envelope=new Ne(Object.assign({context:this.context},e.envelope)),this.noise.chain(this.envelope,this.output)}static getDefaults(){return Object.assign(Se.getDefaults(),{envelope:Object.assign(Ce(Vt.getDefaults(),Object.keys(F.getDefaults())),{decay:.1,sustain:0}),noise:Object.assign(Ce(H.getDefaults(),Object.keys(ke.getDefaults())),{type:"white"})})}triggerAttack(e,s=1){return e=this.toSeconds(e),this.envelope.triggerAttack(e,s),this.noise.start(e),this.envelope.sustain===0&&this.noise.stop(e+this.toSeconds(this.envelope.attack)+this.toSeconds(this.envelope.decay)),this}triggerRelease(e){return e=this.toSeconds(e),this.envelope.triggerRelease(e),this.noise.stop(e+this.toSeconds(this.envelope.release)),this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",0),this._syncMethod("triggerRelease",0)),this}triggerAttackRelease(e,s,i=1){return s=this.toSeconds(s),e=this.toSeconds(e),this.triggerAttack(s,i),this.triggerRelease(s+e),this}dispose(){return super.dispose(),this.noise.dispose(),this.envelope.dispose(),this}}class Z extends qe{constructor(){super(q(Z.getDefaults(),arguments,["callback","value"])),this.name="ToneEvent",this._state=new zt("stopped"),this._startOffset=0;const e=q(Z.getDefaults(),arguments,["callback","value"]);this._loop=e.loop,this.callback=e.callback,this.value=e.value,this._loopStart=this.toTicks(e.loopStart),this._loopEnd=this.toTicks(e.loopEnd),this._playbackRate=e.playbackRate,this._probability=e.probability,this._humanize=e.humanize,this.mute=e.mute,this._playbackRate=e.playbackRate,this._state.increasing=!0,this._rescheduleEvents()}static getDefaults(){return Object.assign(qe.getDefaults(),{callback:at,humanize:!1,loop:!1,loopEnd:"1m",loopStart:0,mute:!1,playbackRate:1,probability:1,value:null})}_rescheduleEvents(e=-1){this._state.forEachFrom(e,s=>{let i;if(s.state==="started"){s.id!==-1&&this.context.transport.clear(s.id);const t=s.time+Math.round(this.startOffset/this._playbackRate);if(this._loop===!0||nt(this._loop)&&this._loop>1){i=1/0,nt(this._loop)&&(i=this._loop*this._getLoopDuration());const a=this._state.getAfter(t);a!==null&&(i=Math.min(i,a.time-t)),i!==1/0&&(this._state.setStateAtTime("stopped",t+i+1,{id:-1}),i=new I(this.context,i));const o=new I(this.context,this._getLoopDuration());s.id=this.context.transport.scheduleRepeat(this._tick.bind(this),o,new I(this.context,t),i)}else s.id=this.context.transport.schedule(this._tick.bind(this),new I(this.context,t))}})}get state(){return this._state.getValueAtTime(this.context.transport.ticks)}get startOffset(){return this._startOffset}set startOffset(e){this._startOffset=e}get probability(){return this._probability}set probability(e){this._probability=e}get humanize(){return this._humanize}set humanize(e){this._humanize=e}start(e){const s=this.toTicks(e);return this._state.getValueAtTime(s)==="stopped"&&(this._state.add({id:-1,state:"started",time:s}),this._rescheduleEvents(s)),this}stop(e){this.cancel(e);const s=this.toTicks(e);if(this._state.getValueAtTime(s)==="started"){this._state.setStateAtTime("stopped",s,{id:-1});const i=this._state.getBefore(s);let t=s;i!==null&&(t=i.time),this._rescheduleEvents(t)}return this}cancel(e){e=be(e,-1/0);const s=this.toTicks(e);return this._state.forEachFrom(s,i=>{this.context.transport.clear(i.id)}),this._state.cancel(s),this}_tick(e){const s=this.context.transport.getTicksAtTime(e);if(!this.mute&&this._state.getValueAtTime(s)==="started"){if(this.probability<1&&Math.random()>this.probability)return;if(this.humanize){let i=.02;Ns(this.humanize)||(i=this.toSeconds(this.humanize)),e+=(Math.random()*2-1)*i}this.callback(e,this.value)}}_getLoopDuration(){return Math.round((this._loopEnd-this._loopStart)/this._playbackRate)}get loop(){return this._loop}set loop(e){this._loop=e,this._rescheduleEvents()}get playbackRate(){return this._playbackRate}set playbackRate(e){this._playbackRate=e,this._rescheduleEvents()}get loopEnd(){return new I(this.context,this._loopEnd).toSeconds()}set loopEnd(e){this._loopEnd=this.toTicks(e),this._loop&&this._rescheduleEvents()}get loopStart(){return new I(this.context,this._loopStart).toSeconds()}set loopStart(e){this._loopStart=this.toTicks(e),this._loop&&this._rescheduleEvents()}get progress(){if(this._loop){const e=this.context.transport.ticks,s=this._state.get(e);if(s!==null&&s.state==="started"){const i=this._getLoopDuration();return(e-s.time)%i/i}else return 0}else return 0}dispose(){return super.dispose(),this.cancel(),this._state.dispose(),this}}class ce extends qe{constructor(){super(q(ce.getDefaults(),arguments,["callback","interval"])),this.name="Loop";const e=q(ce.getDefaults(),arguments,["callback","interval"]);this._event=new Z({context:this.context,callback:this._tick.bind(this),loop:!0,loopEnd:e.interval,playbackRate:e.playbackRate,probability:e.probability}),this.callback=e.callback,this.iterations=e.iterations}static getDefaults(){return Object.assign(qe.getDefaults(),{interval:"4n",callback:at,playbackRate:1,iterations:1/0,probability:1,mute:!1,humanize:!1})}start(e){return this._event.start(e),this}stop(e){return this._event.stop(e),this}cancel(e){return this._event.cancel(e),this}_tick(e){this.callback(e)}get state(){return this._event.state}get progress(){return this._event.progress}get interval(){return this._event.loopEnd}set interval(e){this._event.loopEnd=e}get playbackRate(){return this._event.playbackRate}set playbackRate(e){this._event.playbackRate=e}get humanize(){return this._event.humanize}set humanize(e){this._event.humanize=e}get probability(){return this._event.probability}set probability(e){this._event.probability=e}get mute(){return this._event.mute}set mute(e){this._event.mute=e}get iterations(){return this._event.loop===!0?1/0:this._event.loop}set iterations(e){e===1/0?this._event.loop=!0:this._event.loop=e}dispose(){return super.dispose(),this._event.dispose(),this}}class oe extends Z{constructor(){super(q(oe.getDefaults(),arguments,["callback","events"])),this.name="Part",this._state=new zt("stopped"),this._events=new Set;const e=q(oe.getDefaults(),arguments,["callback","events"]);this._state.increasing=!0,e.events.forEach(s=>{Vs(s)?this.add(s[0],s[1]):this.add(s)})}static getDefaults(){return Object.assign(Z.getDefaults(),{events:[]})}start(e,s){const i=this.toTicks(e);if(this._state.getValueAtTime(i)!=="started"){s=be(s,this._loop?this._loopStart:0),this._loop?s=be(s,this._loopStart):s=be(s,0);const t=this.toTicks(s);this._state.add({id:-1,offset:t,state:"started",time:i}),this._forEach(a=>{this._startNote(a,i,t)})}return this}_startNote(e,s,i){s-=i,this._loop?e.startOffset>=this._loopStart&&e.startOffset<this._loopEnd?(e.startOffset<i&&(s+=this._getLoopDuration()),e.start(new I(this.context,s))):e.startOffset<this._loopStart&&e.startOffset>=i&&(e.loop=!1,e.start(new I(this.context,s))):e.startOffset>=i&&e.start(new I(this.context,s))}get startOffset(){return this._startOffset}set startOffset(e){this._startOffset=e,this._forEach(s=>{s.startOffset+=this._startOffset})}stop(e){const s=this.toTicks(e);return this._state.cancel(s),this._state.setStateAtTime("stopped",s),this._forEach(i=>{i.stop(e)}),this}at(e,s){const i=new zs(this.context,e).toTicks(),t=new I(this.context,1).toSeconds(),a=this._events.values();let o=a.next();for(;!o.done;){const u=o.value;if(Math.abs(i-u.startOffset)<t)return Ue(s)&&(u.value=s),u;o=a.next()}return Ue(s)?(this.add(e,s),this.at(e)):null}add(e,s){e instanceof Object&&Reflect.has(e,"time")&&(s=e,e=s.time);const i=this.toTicks(e);let t;return s instanceof Z?(t=s,t.callback=this._tick.bind(this)):t=new Z({callback:this._tick.bind(this),context:this.context,value:s}),t.startOffset=i,t.set({humanize:this.humanize,loop:this.loop,loopEnd:this.loopEnd,loopStart:this.loopStart,playbackRate:this.playbackRate,probability:this.probability}),this._events.add(t),this._restartEvent(t),this}_restartEvent(e){this._state.forEach(s=>{s.state==="started"?this._startNote(e,s.time,s.offset):e.stop(new I(this.context,s.time))})}remove(e,s){return Is(e)&&e.hasOwnProperty("time")&&(s=e,e=s.time),e=this.toTicks(e),this._events.forEach(i=>{i.startOffset===e&&(js(s)||Ue(s)&&i.value===s)&&(this._events.delete(i),i.dispose())}),this}clear(){return this._forEach(e=>e.dispose()),this._events.clear(),this}cancel(e){return this._forEach(s=>s.cancel(e)),this._state.cancel(this.toTicks(e)),this}_forEach(e){return this._events&&this._events.forEach(s=>{s instanceof oe?s._forEach(e):e(s)}),this}_setAll(e,s){this._forEach(i=>{i[e]=s})}_tick(e,s){this.mute||this.callback(e,s)}_testLoopBoundries(e){this._loop&&(e.startOffset<this._loopStart||e.startOffset>=this._loopEnd)?e.cancel(0):e.state==="stopped"&&this._restartEvent(e)}get probability(){return this._probability}set probability(e){this._probability=e,this._setAll("probability",e)}get humanize(){return this._humanize}set humanize(e){this._humanize=e,this._setAll("humanize",e)}get loop(){return this._loop}set loop(e){this._loop=e,this._forEach(s=>{s.loopStart=this.loopStart,s.loopEnd=this.loopEnd,s.loop=e,this._testLoopBoundries(s)})}get loopEnd(){return new I(this.context,this._loopEnd).toSeconds()}set loopEnd(e){this._loopEnd=this.toTicks(e),this._loop&&this._forEach(s=>{s.loopEnd=e,this._testLoopBoundries(s)})}get loopStart(){return new I(this.context,this._loopStart).toSeconds()}set loopStart(e){this._loopStart=this.toTicks(e),this._loop&&this._forEach(s=>{s.loopStart=this.loopStart,this._testLoopBoundries(s)})}get playbackRate(){return this._playbackRate}set playbackRate(e){this._playbackRate=e,this._setAll("playbackRate",e)}get length(){return this._events.size}dispose(){return super.dispose(),this.clear(),this}}function*Dn(n){let e=0;for(;e<n.length;)e=ee(e,n),yield n[e],e++}function*On(n){let e=n.length-1;for(;e>=0;)e=ee(e,n),yield n[e],e--}function*se(n,e){for(;;)yield*e(n)}function ee(n,e){return Gs(n,0,e.length-1)}function*Et(n,e){let s=e?0:n.length-1;for(;;)s=ee(s,n),yield n[s],e?(s++,s>=n.length-1&&(e=!1)):(s--,s<=0&&(e=!0))}function*Rn(n){let e=0,s=0;for(;e<n.length;)e=ee(e,n),yield n[e],s++,e+=s%2?2:-1}function*En(n){let e=n.length-1,s=0;for(;e>=0;)e=ee(e,n),yield n[e],s++,e+=s%2?-2:1}function*Bn(n){for(;;){const e=Math.floor(Math.random()*n.length);yield n[e]}}function*Mn(n){const e=[];for(let s=0;s<n.length;s++)e.push(s);for(;e.length>0;){const s=e.splice(Math.floor(e.length*Math.random()),1),i=ee(s[0],n);yield n[i]}}function*$n(n){let e=Math.floor(Math.random()*n.length);for(;;)e===0?e++:e===n.length-1||Math.random()<.5?e--:e++,yield n[e]}function*Bt(n,e="up",s=0){switch(re(n.length>0,"The array must have more than one value in it"),e){case"up":yield*se(n,Dn);case"down":yield*se(n,On);case"upDown":yield*Et(n,!0);case"downUp":yield*Et(n,!1);case"alternateUp":yield*se(n,Rn);case"alternateDown":yield*se(n,En);case"random":yield*Bn(n);case"randomOnce":yield*se(n,Mn);case"randomWalk":yield*$n(n)}}class $e extends ce{constructor(){super(q($e.getDefaults(),arguments,["callback","values","pattern"])),this.name="Pattern";const e=q($e.getDefaults(),arguments,["callback","values","pattern"]);this.callback=e.callback,this._values=e.values,this._pattern=Bt(e.values,e.pattern),this._type=e.pattern}static getDefaults(){return Object.assign(ce.getDefaults(),{pattern:"up",values:[],callback:at})}_tick(e){const s=this._pattern.next();this._value=s.value,this.callback(e,this._value)}get values(){return this._values}set values(e){this._values=e,this.pattern=this._type}get value(){return this._value}get pattern(){return this._type}set pattern(e){this._type=e,this._pattern=Bt(this._values,this._type)}}class Fe extends F{constructor(){super(Object.assign(q(Fe.getDefaults(),arguments,["fade"]))),this.name="CrossFade",this._panner=this.context.createStereoPanner(),this._split=this.context.createChannelSplitter(2),this._g2a=new Tn({context:this.context}),this.a=new P({context:this.context,gain:0}),this.b=new P({context:this.context,gain:0}),this.output=new P({context:this.context}),this._internalChannels=[this.a,this.b];const e=q(Fe.getDefaults(),arguments,["fade"]);this.fade=new G({context:this.context,units:"normalRange",value:e.fade}),W(this,"fade"),this.context.getConstant(1).connect(this._panner),this._panner.connect(this._split),this._panner.channelCount=1,this._panner.channelCountMode="explicit",st(this._split,this.a.gain,0),st(this._split,this.b.gain,1),this.fade.chain(this._g2a,this._panner.pan),this.a.connect(this.output),this.b.connect(this.output)}static getDefaults(){return Object.assign(F.getDefaults(),{fade:.5})}dispose(){return super.dispose(),this.a.dispose(),this.b.dispose(),this.output.dispose(),this.fade.dispose(),this._g2a.dispose(),this._panner.disconnect(),this._split.disconnect(),this}}class Ae extends F{constructor(e){super(e),this.name="Effect",this._dryWet=new Fe({context:this.context}),this.wet=this._dryWet.fade,this.effectSend=new P({context:this.context}),this.effectReturn=new P({context:this.context}),this.input=new P({context:this.context}),this.output=this._dryWet,this.input.fan(this._dryWet.a,this.effectSend),this.effectReturn.connect(this._dryWet.b),this.wet.setValueAtTime(e.wet,0),this._internalChannels=[this.effectReturn,this.effectSend],W(this,"wet")}static getDefaults(){return Object.assign(F.getDefaults(),{wet:1})}connectEffect(e){return this._internalChannels.push(e),this.effectSend.chain(e,this.effectReturn),this}dispose(){return super.dispose(),this._dryWet.dispose(),this.effectSend.dispose(),this.effectReturn.dispose(),this.wet.dispose(),this}}class Mt extends Ae{constructor(e){super(e),this.name="LFOEffect",this._lfo=new Be({context:this.context,frequency:e.frequency,amplitude:e.depth}),this.depth=this._lfo.amplitude,this.frequency=this._lfo.frequency,this.type=e.type,W(this,["frequency","depth"])}static getDefaults(){return Object.assign(Ae.getDefaults(),{frequency:1,type:"sine",depth:1})}start(e){return this._lfo.start(e),this}stop(e){return this._lfo.stop(e),this}sync(){return this._lfo.sync(),this}unsync(){return this._lfo.unsync(),this}get type(){return this._lfo.type}set type(e){this._lfo.type=e}dispose(){return super.dispose(),this._lfo.dispose(),this.frequency.dispose(),this.depth.dispose(),this}}class he extends F{constructor(){super(q(he.getDefaults(),arguments,["channels"])),this.name="Merge";const e=q(he.getDefaults(),arguments,["channels"]);this._merger=this.output=this.input=this.context.createChannelMerger(e.channels)}static getDefaults(){return Object.assign(F.getDefaults(),{channels:2})}dispose(){return super.dispose(),this._merger.disconnect(),this}}class Le extends F{constructor(){super(q(Le.getDefaults(),arguments,["positionX","positionY","positionZ"])),this.name="Panner3D";const e=q(Le.getDefaults(),arguments,["positionX","positionY","positionZ"]);this._panner=this.input=this.output=this.context.createPanner(),this.panningModel=e.panningModel,this.maxDistance=e.maxDistance,this.distanceModel=e.distanceModel,this.coneOuterGain=e.coneOuterGain,this.coneOuterAngle=e.coneOuterAngle,this.coneInnerAngle=e.coneInnerAngle,this.refDistance=e.refDistance,this.rolloffFactor=e.rolloffFactor,this.positionX=new L({context:this.context,param:this._panner.positionX,value:e.positionX}),this.positionY=new L({context:this.context,param:this._panner.positionY,value:e.positionY}),this.positionZ=new L({context:this.context,param:this._panner.positionZ,value:e.positionZ}),this.orientationX=new L({context:this.context,param:this._panner.orientationX,value:e.orientationX}),this.orientationY=new L({context:this.context,param:this._panner.orientationY,value:e.orientationY}),this.orientationZ=new L({context:this.context,param:this._panner.orientationZ,value:e.orientationZ})}static getDefaults(){return Object.assign(F.getDefaults(),{coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,distanceModel:"inverse",maxDistance:1e4,orientationX:0,orientationY:0,orientationZ:0,panningModel:"equalpower",positionX:0,positionY:0,positionZ:0,refDistance:1,rolloffFactor:1})}setPosition(e,s,i){return this.positionX.value=e,this.positionY.value=s,this.positionZ.value=i,this}setOrientation(e,s,i){return this.orientationX.value=e,this.orientationY.value=s,this.orientationZ.value=i,this}get panningModel(){return this._panner.panningModel}set panningModel(e){this._panner.panningModel=e}get refDistance(){return this._panner.refDistance}set refDistance(e){this._panner.refDistance=e}get rolloffFactor(){return this._panner.rolloffFactor}set rolloffFactor(e){this._panner.rolloffFactor=e}get distanceModel(){return this._panner.distanceModel}set distanceModel(e){this._panner.distanceModel=e}get coneInnerAngle(){return this._panner.coneInnerAngle}set coneInnerAngle(e){this._panner.coneInnerAngle=e}get coneOuterAngle(){return this._panner.coneOuterAngle}set coneOuterAngle(e){this._panner.coneOuterAngle=e}get coneOuterGain(){return this._panner.coneOuterGain}set coneOuterGain(e){this._panner.coneOuterGain=e}get maxDistance(){return this._panner.maxDistance}set maxDistance(e){this._panner.maxDistance=e}dispose(){return super.dispose(),this._panner.disconnect(),this.orientationX.dispose(),this.orientationY.dispose(),this.orientationZ.dispose(),this.positionX.dispose(),this.positionY.dispose(),this.positionZ.dispose(),this}}const Fn={class:"text-h6 text-left"},An=ot({__name:"SoundGeneratorControls",props:{name:{},muteCtrl:{type:Boolean},type:{}},emits:["update:muteCtrl","showVolumeDialog"],setup(n,{emit:e}){const i=kn(n,"muteCtrl",e);function t(){e("showVolumeDialog",{title:"Foo"})}return(a,o)=>(ne(),Te(jt,{class:"my-card text-white",style:{background:"radial-gradient(circle, #35a2ff 0%, #014a88 100%)"}},{default:M(()=>[R(It,{class:"q-pb-none"},{default:M(()=>[ie("div",Fn,De(a.name),1)]),_:1}),R(rt,{align:"right",class:"q-py-none"},{default:M(()=>[R(Qs,{modelValue:A(i),"onUpdate:modelValue":o[0]||(o[0]=u=>it(i)?i.value=u:null),label:"Mute","checked-icon":"volume_off","unchecked-icon":"volume_up","keep-color":"","left-label":"",color:"red"},null,8,["modelValue"]),R(Oe,{flat:"",onClick:t},{default:M(()=>[xe("Volume")]),_:1})]),_:1})]),_:1}))}}),Ln=["top","middle","bottom"],Kt=Ve({name:"QBadge",props:{color:String,textColor:String,floating:Boolean,transparent:Boolean,multiLine:Boolean,outline:Boolean,rounded:Boolean,label:[Number,String],align:{type:String,validator:n=>Ln.includes(n)}},setup(n,{slots:e}){const s=c(()=>n.align!==void 0?{verticalAlign:n.align}:null),i=c(()=>{const t=n.outline===!0&&n.color||n.textColor;return`q-badge flex inline items-center no-wrap q-badge--${n.multiLine===!0?"multi":"single"}-line`+(n.outline===!0?" q-badge--outline":n.color!==void 0?` bg-${n.color}`:"")+(t!==void 0?` text-${t}`:"")+(n.floating===!0?" q-badge--floating":"")+(n.rounded===!0?" q-badge--rounded":"")+(n.transparent===!0?" q-badge--transparent":"")});return()=>B("div",{class:i.value,style:s.value,role:"status","aria-label":n.label},Gt(e.default,n.label!==void 0?[n.label]:[]))}}),Pn={xs:2,sm:4,md:6,lg:10,xl:14};function $t(n,e,s){return{transform:e===!0?`translateX(${s.lang.rtl===!0?"-":""}100%) scale3d(${-n},1,1)`:`scale3d(${n},1,1)`}}const Nn=Ve({name:"QLinearProgress",props:{...Qt,...Xs,value:{type:Number,default:0},buffer:Number,color:String,trackColor:String,reverse:Boolean,stripe:Boolean,indeterminate:Boolean,query:Boolean,rounded:Boolean,animationSpeed:{type:[String,Number],default:2100},instantFeedback:Boolean},setup(n,{slots:e}){const{proxy:s}=lt(),i=Xt(n,s.$q),t=Ys(n,Pn),a=c(()=>n.indeterminate===!0||n.query===!0),o=c(()=>n.reverse!==n.query),u=c(()=>({...t.value!==null?t.value:{},"--q-linear-progress-speed":`${n.animationSpeed}ms`})),l=c(()=>"q-linear-progress"+(n.color!==void 0?` text-${n.color}`:"")+(n.reverse===!0||n.query===!0?" q-linear-progress--reverse":"")+(n.rounded===!0?" rounded-borders":"")),p=c(()=>$t(n.buffer!==void 0?n.buffer:1,o.value,s.$q)),h=c(()=>`with${n.instantFeedback===!0?"out":""}-transition`),d=c(()=>`q-linear-progress__track absolute-full q-linear-progress__track--${h.value} q-linear-progress__track--${i.value===!0?"dark":"light"}`+(n.trackColor!==void 0?` bg-${n.trackColor}`:"")),_=c(()=>$t(a.value===!0?1:n.value,o.value,s.$q)),y=c(()=>`q-linear-progress__model absolute-full q-linear-progress__model--${h.value} q-linear-progress__model--${a.value===!0?"in":""}determinate`),k=c(()=>({width:`${n.value*100}%`})),v=c(()=>`q-linear-progress__stripe absolute-${n.reverse===!0?"right":"left"} q-linear-progress__stripe--${h.value}`);return()=>{const T=[B("div",{class:d.value,style:p.value}),B("div",{class:y.value,style:_.value})];return n.stripe===!0&&a.value===!1&&T.push(B("div",{class:v.value,style:k.value})),B("div",{class:l.value,style:u.value,role:"progressbar","aria-valuemin":0,"aria-valuemax":1,"aria-valuenow":n.indeterminate===!0?void 0:n.value},Gt(e.default,T))}}}),Vn=Ve({name:"QSlideTransition",props:{appear:Boolean,duration:{type:Number,default:300}},emits:["show","hide"],setup(n,{slots:e,emit:s}){let i=!1,t,a,o=null,u=null,l,p;function h(){t&&t(),t=null,i=!1,o!==null&&(clearTimeout(o),o=null),u!==null&&(clearTimeout(u),u=null),a!==void 0&&a.removeEventListener("transitionend",l),l=null}function d(v,T,b){T!==void 0&&(v.style.height=`${T}px`),v.style.transition=`height ${n.duration}ms cubic-bezier(.25, .8, .50, 1)`,i=!0,t=b}function _(v,T){v.style.overflowY=null,v.style.height=null,v.style.transition=null,h(),T!==p&&s(T)}function y(v,T){let b=0;a=v,i===!0?(h(),b=v.offsetHeight===v.scrollHeight?0:void 0):(p="hide",v.style.overflowY="hidden"),d(v,b,T),o=setTimeout(()=>{o=null,v.style.height=`${v.scrollHeight}px`,l=m=>{u=null,(Object(m)!==m||m.target===v)&&_(v,"show")},v.addEventListener("transitionend",l),u=setTimeout(l,n.duration*1.1)},100)}function k(v,T){let b;a=v,i===!0?h():(p="show",v.style.overflowY="hidden",b=v.scrollHeight),d(v,b,T),o=setTimeout(()=>{o=null,v.style.height=0,l=m=>{u=null,(Object(m)!==m||m.target===v)&&_(v,"hide")},v.addEventListener("transitionend",l),u=setTimeout(l,n.duration*1.1)},100)}return ut(()=>{i===!0&&h()}),()=>B(Zs,{css:!1,appear:n.appear,onEnter:y,onLeave:k},e.default)}}),pt={left:!0,right:!0,up:!0,down:!0,horizontal:!0,vertical:!0},zn=Object.keys(pt);pt.all=!0;function Ft(n){const e={};for(const s of zn)n[s]===!0&&(e[s]=!0);return Object.keys(e).length===0?pt:(e.horizontal===!0?e.left=e.right=!0:e.left===!0&&e.right===!0&&(e.horizontal=!0),e.vertical===!0?e.up=e.down=!0:e.up===!0&&e.down===!0&&(e.vertical=!0),e.horizontal===!0&&e.vertical===!0&&(e.all=!0),e)}const In=["INPUT","TEXTAREA"];function At(n,e){return e.event===void 0&&n.target!==void 0&&n.target.draggable!==!0&&typeof e.handler=="function"&&In.includes(n.target.nodeName.toUpperCase())===!1&&(n.qClonedBy===void 0||n.qClonedBy.indexOf(e.uid)===-1)}function tt(n,e,s){const i=Re(n);let t,a=i.left-e.event.x,o=i.top-e.event.y,u=Math.abs(a),l=Math.abs(o);const p=e.direction;p.horizontal===!0&&p.vertical!==!0?t=a<0?"left":"right":p.horizontal!==!0&&p.vertical===!0?t=o<0?"up":"down":p.up===!0&&o<0?(t="up",u>l&&(p.left===!0&&a<0?t="left":p.right===!0&&a>0&&(t="right"))):p.down===!0&&o>0?(t="down",u>l&&(p.left===!0&&a<0?t="left":p.right===!0&&a>0&&(t="right"))):p.left===!0&&a<0?(t="left",u<l&&(p.up===!0&&o<0?t="up":p.down===!0&&o>0&&(t="down"))):p.right===!0&&a>0&&(t="right",u<l&&(p.up===!0&&o<0?t="up":p.down===!0&&o>0&&(t="down")));let h=!1;if(t===void 0&&s===!1){if(e.event.isFirst===!0||e.event.lastDir===void 0)return{};t=e.event.lastDir,h=!0,t==="left"||t==="right"?(i.left-=a,u=0,a=0):(i.top-=o,l=0,o=0)}return{synthetic:h,payload:{evt:n,touch:e.event.mouse!==!0,mouse:e.event.mouse===!0,position:i,direction:t,isFirst:e.event.isFirst,isFinal:s===!0,duration:Date.now()-e.event.time,distance:{x:u,y:l},offset:{x:a,y:o},delta:{x:i.left-e.event.lastX,y:i.top-e.event.lastY}}}}let jn=0;const Gn=Us({name:"touch-pan",beforeMount(n,{value:e,modifiers:s}){if(s.mouse!==!0&&te.has.touch!==!0)return;function i(a,o){s.mouse===!0&&o===!0?Yt(a):(s.stop===!0&&Ke(a),s.prevent===!0&&Dt(a))}const t={uid:"qvtp_"+jn++,handler:e,modifiers:s,direction:Ft(s),noop:Ws,mouseStart(a){At(a,t)&&Ks(a)&&(ye(t,"temp",[[document,"mousemove","move","notPassiveCapture"],[document,"mouseup","end","passiveCapture"]]),t.start(a,!0))},touchStart(a){if(At(a,t)){const o=a.target;ye(t,"temp",[[o,"touchmove","move","notPassiveCapture"],[o,"touchcancel","end","passiveCapture"],[o,"touchend","end","passiveCapture"]]),t.start(a)}},start(a,o){if(te.is.firefox===!0&&We(n,!0),t.lastEvt=a,o===!0||s.stop===!0){if(t.direction.all!==!0&&(o!==!0||t.modifiers.mouseAllDir!==!0&&t.modifiers.mousealldir!==!0)){const p=a.type.indexOf("mouse")>-1?new MouseEvent(a.type,a):new TouchEvent(a.type,a);a.defaultPrevented===!0&&Dt(p),a.cancelBubble===!0&&Ke(p),Object.assign(p,{qKeyEvent:a.qKeyEvent,qClickOutside:a.qClickOutside,qAnchorHandled:a.qAnchorHandled,qClonedBy:a.qClonedBy===void 0?[t.uid]:a.qClonedBy.concat(t.uid)}),t.initialEvent={target:a.target,event:p}}Ke(a)}const{left:u,top:l}=Re(a);t.event={x:u,y:l,time:Date.now(),mouse:o===!0,detected:!1,isFirst:!0,isFinal:!1,lastX:u,lastY:l}},move(a){if(t.event===void 0)return;const o=Re(a),u=o.left-t.event.x,l=o.top-t.event.y;if(u===0&&l===0)return;t.lastEvt=a;const p=t.event.mouse===!0,h=()=>{i(a,p);let y;s.preserveCursor!==!0&&s.preservecursor!==!0&&(y=document.documentElement.style.cursor||"",document.documentElement.style.cursor="grabbing"),p===!0&&document.body.classList.add("no-pointer-events--children"),document.body.classList.add("non-selectable"),Js(),t.styleCleanup=k=>{if(t.styleCleanup=void 0,y!==void 0&&(document.documentElement.style.cursor=y),document.body.classList.remove("non-selectable"),p===!0){const v=()=>{document.body.classList.remove("no-pointer-events--children")};k!==void 0?setTimeout(()=>{v(),k()},50):v()}else k!==void 0&&k()}};if(t.event.detected===!0){t.event.isFirst!==!0&&i(a,t.event.mouse);const{payload:y,synthetic:k}=tt(a,t,!1);y!==void 0&&(t.handler(y)===!1?t.end(a):(t.styleCleanup===void 0&&t.event.isFirst===!0&&h(),t.event.lastX=y.position.left,t.event.lastY=y.position.top,t.event.lastDir=k===!0?void 0:y.direction,t.event.isFirst=!1));return}if(t.direction.all===!0||p===!0&&(t.modifiers.mouseAllDir===!0||t.modifiers.mousealldir===!0)){h(),t.event.detected=!0,t.move(a);return}const d=Math.abs(u),_=Math.abs(l);d!==_&&(t.direction.horizontal===!0&&d>_||t.direction.vertical===!0&&d<_||t.direction.up===!0&&d<_&&l<0||t.direction.down===!0&&d<_&&l>0||t.direction.left===!0&&d>_&&u<0||t.direction.right===!0&&d>_&&u>0?(t.event.detected=!0,t.move(a)):t.end(a,!0))},end(a,o){if(t.event!==void 0){if(Je(t,"temp"),te.is.firefox===!0&&We(n,!1),o===!0)t.styleCleanup!==void 0&&t.styleCleanup(),t.event.detected!==!0&&t.initialEvent!==void 0&&t.initialEvent.target.dispatchEvent(t.initialEvent.event);else if(t.event.detected===!0){t.event.isFirst===!0&&t.handler(tt(a===void 0?t.lastEvt:a,t).payload);const{payload:u}=tt(a===void 0?t.lastEvt:a,t,!0),l=()=>{t.handler(u)};t.styleCleanup!==void 0?t.styleCleanup(l):l()}t.event=void 0,t.initialEvent=void 0,t.lastEvt=void 0}}};if(n.__qtouchpan=t,s.mouse===!0){const a=s.mouseCapture===!0||s.mousecapture===!0?"Capture":"";ye(t,"main",[[n,"mousedown","mouseStart",`passive${a}`]])}te.has.touch===!0&&ye(t,"main",[[n,"touchstart","touchStart",`passive${s.capture===!0?"Capture":""}`],[n,"touchmove","noop","notPassiveCapture"]])},updated(n,e){const s=n.__qtouchpan;s!==void 0&&(e.oldValue!==e.value&&(typeof value!="function"&&s.end(),s.handler=e.value),s.direction=Ft(e.modifiers))},beforeUnmount(n){const e=n.__qtouchpan;e!==void 0&&(e.event!==void 0&&e.end(),Je(e,"main"),Je(e,"temp"),te.is.firefox===!0&&We(n,!1),e.styleCleanup!==void 0&&e.styleCleanup(),delete n.__qtouchpan)}});function J(n,e,s){return s<=e?e:Math.min(s,Math.max(e,n))}const Lt="q-slider__marker-labels",Qn=n=>({value:n}),Xn=({marker:n})=>B("div",{key:n.value,style:n.style,class:n.classes},n.label),Jt=[34,37,40,33,39,38],Yn={...Qt,...en,min:{type:Number,default:0},max:{type:Number,default:100},innerMin:Number,innerMax:Number,step:{type:Number,default:1,validator:n=>n>=0},snap:Boolean,vertical:Boolean,reverse:Boolean,hideSelection:Boolean,color:String,markerLabelsClass:String,label:Boolean,labelColor:String,labelTextColor:String,labelAlways:Boolean,switchLabelSide:Boolean,markers:[Boolean,Number],markerLabels:[Boolean,Array,Object,Function],switchMarkerLabelsSide:Boolean,trackImg:String,trackColor:String,innerTrackImg:String,innerTrackColor:String,selectionColor:String,selectionImg:String,thumbSize:{type:String,default:"20px"},trackSize:{type:String,default:"4px"},disable:Boolean,readonly:Boolean,dense:Boolean,tabindex:[String,Number],thumbColor:String,thumbPath:{type:String,default:"M 4, 10 a 6,6 0 1,0 12,0 a 6,6 0 1,0 -12,0"}},Zn=["pan","update:modelValue","change"];function Un({updateValue:n,updatePosition:e,getDragging:s,formAttrs:i}){const{props:t,emit:a,slots:o,proxy:{$q:u}}=lt(),l=Xt(t,u),p=sn(i),h=Q(!1),d=Q(!1),_=Q(!1),y=Q(!1),k=c(()=>t.vertical===!0?"--v":"--h"),v=c(()=>"-"+(t.switchLabelSide===!0?"switched":"standard")),T=c(()=>t.vertical===!0?t.reverse===!0:t.reverse!==(u.lang.rtl===!0)),b=c(()=>isNaN(t.innerMin)===!0||t.innerMin<t.min?t.min:t.innerMin),m=c(()=>isNaN(t.innerMax)===!0||t.innerMax>t.max?t.max:t.innerMax),g=c(()=>t.disable!==!0&&t.readonly!==!0&&b.value<m.value),x=c(()=>(String(t.step).trim().split(".")[1]||"").length),f=c(()=>t.step===0?1:t.step),C=c(()=>g.value===!0?t.tabindex||0:-1),w=c(()=>t.max-t.min),j=c(()=>m.value-b.value),N=c(()=>je(b.value)),Ie=c(()=>je(m.value)),_e=c(()=>t.vertical===!0?T.value===!0?"bottom":"top":T.value===!0?"right":"left"),_t=c(()=>t.vertical===!0?"height":"width"),ss=c(()=>t.vertical===!0?"width":"height"),vt=c(()=>t.vertical===!0?"vertical":"horizontal"),ns=c(()=>{const r={role:"slider","aria-valuemin":b.value,"aria-valuemax":m.value,"aria-orientation":vt.value,"data-step":t.step};return t.disable===!0?r["aria-disabled"]="true":t.readonly===!0&&(r["aria-readonly"]="true"),r}),is=c(()=>`q-slider q-slider${k.value} q-slider--${h.value===!0?"":"in"}active inline no-wrap `+(t.vertical===!0?"row":"column")+(t.disable===!0?" disabled":" q-slider--enabled"+(g.value===!0?" q-slider--editable":""))+(_.value==="both"?" q-slider--focus":"")+(t.label||t.labelAlways===!0?" q-slider--label":"")+(t.labelAlways===!0?" q-slider--label-always":"")+(l.value===!0?" q-slider--dark":"")+(t.dense===!0?" q-slider--dense q-slider--dense"+k.value:""));function ve(r){const S="q-slider__"+r;return`${S} ${S}${k.value} ${S}${k.value}${v.value}`}function yt(r){const S="q-slider__"+r;return`${S} ${S}${k.value}`}const as=c(()=>{const r=t.selectionColor||t.color;return"q-slider__selection absolute"+(r!==void 0?` text-${r}`:"")}),os=c(()=>yt("markers")+" absolute overflow-hidden"),rs=c(()=>yt("track-container")),ls=c(()=>ve("pin")),us=c(()=>ve("label")),cs=c(()=>ve("text-container")),hs=c(()=>ve("marker-labels-container")+(t.markerLabelsClass!==void 0?` ${t.markerLabelsClass}`:"")),ps=c(()=>"q-slider__track relative-position no-outline"+(t.trackColor!==void 0?` bg-${t.trackColor}`:"")),ds=c(()=>{const r={[ss.value]:t.trackSize};return t.trackImg!==void 0&&(r.backgroundImage=`url(${t.trackImg}) !important`),r}),fs=c(()=>"q-slider__inner absolute"+(t.innerTrackColor!==void 0?` bg-${t.innerTrackColor}`:"")),bt=c(()=>{const r={[_e.value]:`${100*N.value}%`,[_t.value]:`${100*(Ie.value-N.value)}%`};return t.innerTrackImg!==void 0&&(r.backgroundImage=`url(${t.innerTrackImg}) !important`),r});function ms(r){const{min:S,max:D,step:O}=t;let $=S+r*(D-S);if(O>0){const Y=($-S)%O;$+=(Math.abs(Y)>=O/2?(Y<0?-1:1)*O:0)-Y}return x.value>0&&($=parseFloat($.toFixed(x.value))),J($,b.value,m.value)}function je(r){return w.value===0?0:(r-t.min)/w.value}function gs(r,S){const D=Re(r),O=t.vertical===!0?J((D.top-S.top)/S.height,0,1):J((D.left-S.left)/S.width,0,1);return J(T.value===!0?1-O:O,N.value,Ie.value)}const xt=c(()=>Hs(t.markers)===!0?t.markers:f.value),kt=c(()=>{const r=[],S=xt.value,D=t.max;let O=t.min;do r.push(O),O+=S;while(O<D);return r.push(D),r}),wt=c(()=>{const r=` ${Lt}${k.value}-`;return Lt+`${r}${t.switchMarkerLabelsSide===!0?"switched":"standard"}${r}${T.value===!0?"rtl":"ltr"}`}),Ge=c(()=>t.markerLabels===!1?null:vs(t.markerLabels).map((r,S)=>({index:S,value:r.value,label:r.label||r.value,classes:wt.value+(r.classes!==void 0?" "+r.classes:""),style:{...Ct(r.value),...r.style||{}}}))),St=c(()=>({markerList:Ge.value,markerMap:ys.value,classes:wt.value,getStyle:Ct})),_s=c(()=>{if(j.value!==0){const r=100*xt.value/j.value;return{...bt.value,backgroundSize:t.vertical===!0?`2px ${r}%`:`${r}% 2px`}}return null});function vs(r){if(r===!1)return null;if(r===!0)return kt.value.map(Qn);if(typeof r=="function")return kt.value.map(D=>{const O=r(D);return He(O)===!0?{...O,value:D}:{value:D,label:O}});const S=({value:D})=>D>=t.min&&D<=t.max;return Array.isArray(r)===!0?r.map(D=>He(D)===!0?D:{value:D}).filter(S):Object.keys(r).map(D=>{const O=r[D],$=Number(D);return He(O)===!0?{...O,value:$}:{value:$,label:O}}).filter(S)}function Ct(r){return{[_e.value]:`${100*(r-t.min)/w.value}%`}}const ys=c(()=>{if(t.markerLabels===!1)return null;const r={};return Ge.value.forEach(S=>{r[S.value]=S}),r});function bs(){if(o["marker-label-group"]!==void 0)return o["marker-label-group"](St.value);const r=o["marker-label"]||Xn;return Ge.value.map(S=>r({marker:S,...St.value}))}const xs=c(()=>[[Gn,ks,void 0,{[vt.value]:!0,prevent:!0,stop:!0,mouse:!0,mouseAllDir:!0}]]);function ks(r){r.isFinal===!0?(y.value!==void 0&&(e(r.evt),r.touch===!0&&n(!0),y.value=void 0,a("pan","end")),h.value=!1,_.value=!1):r.isFirst===!0?(y.value=s(r.evt),e(r.evt),n(),h.value=!0,a("pan","start")):(e(r.evt),n())}function qt(){_.value=!1}function ws(r){e(r,s(r)),n(),d.value=!0,h.value=!0,document.addEventListener("mouseup",Qe,!0)}function Qe(){d.value=!1,h.value=!1,n(!0),qt(),document.removeEventListener("mouseup",Qe,!0)}function Ss(r){e(r,s(r)),n(!0)}function Cs(r){Jt.includes(r.keyCode)&&n(!0)}function qs(r){if(t.vertical===!0)return null;const S=u.lang.rtl!==t.reverse?1-r:r;return{transform:`translateX(calc(${2*S-1} * ${t.thumbSize} / 2 + ${50-100*S}%))`}}function Ts(r){const S=c(()=>d.value===!1&&(_.value===r.focusValue||_.value==="both")?" q-slider--focus":""),D=c(()=>`q-slider__thumb q-slider__thumb${k.value} q-slider__thumb${k.value}-${T.value===!0?"rtl":"ltr"} absolute non-selectable`+S.value+(r.thumbColor.value!==void 0?` text-${r.thumbColor.value}`:"")),O=c(()=>({width:t.thumbSize,height:t.thumbSize,[_e.value]:`${100*r.ratio.value}%`,zIndex:_.value===r.focusValue?2:void 0})),$=c(()=>r.labelColor.value!==void 0?` text-${r.labelColor.value}`:""),Y=c(()=>qs(r.ratio.value)),Xe=c(()=>"q-slider__text"+(r.labelTextColor.value!==void 0?` text-${r.labelTextColor.value}`:""));return()=>{const Ye=[B("svg",{class:"q-slider__thumb-shape absolute-full",viewBox:"0 0 20 20","aria-hidden":"true"},[B("path",{d:t.thumbPath})]),B("div",{class:"q-slider__focus-ring fit"})];return(t.label===!0||t.labelAlways===!0)&&(Ye.push(B("div",{class:ls.value+" absolute fit no-pointer-events"+$.value},[B("div",{class:us.value,style:{minWidth:t.thumbSize}},[B("div",{class:cs.value,style:Y.value},[B("span",{class:Xe.value},r.label.value)])])])),t.name!==void 0&&t.disable!==!0&&p(Ye,"push")),B("div",{class:D.value,style:O.value,...r.getNodeData()},Ye)}}function Ds(r,S,D,O){const $=[];t.innerTrackColor!=="transparent"&&$.push(B("div",{key:"inner",class:fs.value,style:bt.value})),t.selectionColor!=="transparent"&&$.push(B("div",{key:"selection",class:as.value,style:r.value})),t.markers!==!1&&$.push(B("div",{key:"marker",class:os.value,style:_s.value})),O($);const Y=[tn("div",{key:"trackC",class:rs.value,tabindex:S.value,...D.value},[B("div",{class:ps.value,style:ds.value},$)],"slide",g.value,()=>xs.value)];if(t.markerLabels!==!1){const Xe=t.switchMarkerLabelsSide===!0?"unshift":"push";Y[Xe](B("div",{key:"markerL",class:hs.value},bs()))}return Y}return ut(()=>{document.removeEventListener("mouseup",Qe,!0)}),{state:{active:h,focus:_,preventFocus:d,dragging:y,editable:g,classes:is,tabindex:C,attributes:ns,step:f,decimals:x,trackLen:w,innerMin:b,innerMinRatio:N,innerMax:m,innerMaxRatio:Ie,positionProp:_e,sizeProp:_t,isReversed:T},methods:{onActivate:ws,onMobileClick:Ss,onBlur:qt,onKeyup:Cs,getContent:Ds,getThumbRenderFn:Ts,convertRatioToModel:ms,convertModelToRatio:je,getDraggingRatio:gs}}}const Wn=()=>({}),Kn=Ve({name:"QSlider",props:{...Yn,modelValue:{required:!0,default:null,validator:n=>typeof n=="number"||n===null},labelValue:[String,Number]},emits:Zn,setup(n,{emit:e}){const{proxy:{$q:s}}=lt(),{state:i,methods:t}=Un({updateValue:k,updatePosition:T,getDragging:v,formAttrs:nn(n)}),a=Q(null),o=Q(0),u=Q(0);function l(){u.value=n.modelValue===null?i.innerMin.value:J(n.modelValue,i.innerMin.value,i.innerMax.value)}an(()=>`${n.modelValue}|${i.innerMin.value}|${i.innerMax.value}`,l),l();const p=c(()=>t.convertModelToRatio(u.value)),h=c(()=>i.active.value===!0?o.value:p.value),d=c(()=>{const g={[i.positionProp.value]:`${100*i.innerMinRatio.value}%`,[i.sizeProp.value]:`${100*(h.value-i.innerMinRatio.value)}%`};return n.selectionImg!==void 0&&(g.backgroundImage=`url(${n.selectionImg}) !important`),g}),_=t.getThumbRenderFn({focusValue:!0,getNodeData:Wn,ratio:h,label:c(()=>n.labelValue!==void 0?n.labelValue:u.value),thumbColor:c(()=>n.thumbColor||n.color),labelColor:c(()=>n.labelColor),labelTextColor:c(()=>n.labelTextColor)}),y=c(()=>i.editable.value!==!0?{}:s.platform.is.mobile===!0?{onClick:t.onMobileClick}:{onMousedown:t.onActivate,onFocus:b,onBlur:t.onBlur,onKeydown:m,onKeyup:t.onKeyup});function k(g){u.value!==n.modelValue&&e("update:modelValue",u.value),g===!0&&e("change",u.value)}function v(){return a.value.getBoundingClientRect()}function T(g,x=i.dragging.value){const f=t.getDraggingRatio(g,x);u.value=t.convertRatioToModel(f),o.value=n.snap!==!0||n.step===0?f:t.convertModelToRatio(u.value)}function b(){i.focus.value=!0}function m(g){if(!Jt.includes(g.keyCode))return;Yt(g);const x=([34,33].includes(g.keyCode)?10:1)*i.step.value,f=([34,37,40].includes(g.keyCode)?-1:1)*(i.isReversed.value===!0?-1:1)*(n.vertical===!0?-1:1)*x;u.value=J(parseFloat((u.value+f).toFixed(i.decimals.value)),i.innerMin.value,i.innerMax.value),k()}return()=>{const g=t.getContent(d,i.tabindex,y,x=>{x.push(_())});return B("div",{ref:a,class:i.classes.value+(n.modelValue===null?" q-slider--no-value":""),...i.attributes.value,"aria-valuenow":n.modelValue},g)}}}),Jn=ot({__name:"volumeDialog",setup(n,{expose:e}){const{isRevealed:s,reveal:i,onReveal:t,onConfirm:a,confirm:o}=wn();e({reveal:i});const u=Q(""),l=Q(10),p=Q(h=>{});return t(h=>{u.value=h.title,l.value=h.volume,p.value=h.updateVolume}),a(()=>{u.value="",l.value=10}),(h,d)=>(ne(),Te(cn,{modelValue:A(s),"onUpdate:modelValue":d[2]||(d[2]=_=>it(s)?s.value=_:null),ref:"dialogRef",persistent:"",maximized:"","transition-show":"slide-up","transition-hide":"slide-down"},{default:M(()=>[R(jt,{dark:"",class:"q-dialog-plugin bg-blue-grey text-whit"},{default:M(()=>[R(on,{elevated:"",class:"bg-primary text-white justify-between"},{default:M(()=>[R(Oe,{onClick:d[0]||(d[0]=_=>A(o)()),dense:"",flat:"",icon:"close",class:"item-start"},{default:M(()=>[R(rn,{class:"bg-white text-primary"},{default:M(()=>[xe("Close")]),_:1})]),_:1}),R(ln,null,{default:M(()=>[xe(De(A(u)),1)]),_:1}),R(un,{name:"equalizer"})]),_:1}),R(rt,{vertical:"",align:"center",class:"q-pt-lg q-gutter-md"},{default:M(()=>[R(Kt,{color:"secondary",class:"q-pa-sm"},{default:M(()=>[xe(De(A(l)),1)]),_:1}),R(Kn,{onChange:A(p),modelValue:A(l),"onUpdate:modelValue":d[1]||(d[1]=_=>it(l)?l.value=_:null),min:0,max:100,vertical:"","track-size":"76px","thumb-size":"0",reverse:""},null,8,["onChange","modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"]))}});function Hn(n){return n.toLowerCase()}var ei=[/([a-z0-9])([A-Z])/g,/([A-Z])([A-Z][a-z])/g],ti=/[^A-Z0-9]+/gi;function si(n,e){e===void 0&&(e={});for(var s=e.splitRegexp,i=s===void 0?ei:s,t=e.stripRegexp,a=t===void 0?ti:t,o=e.transform,u=o===void 0?Hn:o,l=e.delimiter,p=l===void 0?" ":l,h=Pt(Pt(n,i,"$1\0$2"),a,"\0"),d=0,_=h.length;h.charAt(d)==="\0";)d++;for(;h.charAt(_-1)==="\0";)_--;return h.slice(d,_).split("\0").map(u).join(p)}function Pt(n,e,s){return e instanceof RegExp?n.replace(e,s):e.reduce(function(i,t){return i.replace(t,s)},n)}function ni(n){return n.charAt(0).toUpperCase()+n.substr(1)}function ii(n){return ni(n.toLowerCase())}function Ht(n,e){return e===void 0&&(e={}),si(n,hn({delimiter:" ",transform:ii},e))}function ge(n,e,s){return pn((t,a)=>({get(){return t(),n[e]??s},set(o){n.set({[e]:o}),a()}}))}function ai(n,e,s){const{gain:i,noise:t}=s;console.debug(`createBasicNoiseGen ${n} gain %o, opt %o`,i,s);const a=new de(0),o=a.send("main"),u=new Ne({attack:5,decay:0,sustain:.5,release:10,attackCurve:"sine",releaseCurve:"sine"}).connect(a),l=new H(t).connect(u);e.onPlayBackStarted(()=>{l.state==="stopped"&&l.start("+0.1"),u.set({release:10,attack:5}),u.triggerAttack("+0.2")}),e.onPlayBackPaused(()=>{u.set({release:2,attack:2}),u.triggerRelease("+0.1")}),e.onPlayBackStopped(()=>{u.triggerRelease("+0.1")});const p=c(()=>`${n} - ${Ht(l.type)}`),h=ge(a,"mute",!1),d=c({get:()=>o.gain.value,set:k=>o.gain.rampTo(k,"+0.5")}),_=c({get:()=>a.volume.value,set:k=>a.volume.rampTo(k,"+0.5")});function y(){a.dispose()}return fe({generatorName:p,type:"BasicNoiseGen",muteCtrl:h,gainCtrl:d,volumeCtrl:_,dispose:y})}function oi(n,e,s){const{gain:i,beatFreq:t,osc:a}=s;console.debug(`createBasicNoiseGen ${n} gain %o, opt %o`,i,U(s));const o=new de,u=new P(i),l=new Ne({attack:6,decay:0,sustain:1,release:4,attackCurve:"cosine",releaseCurve:"linear"}),p=new he,h=new ae({type:"sine",...a}),d=new ae({type:"sine",...a});o.send("main"),p.chain(l,u,o),d.connect(p,0,1).sync(),h.connect(p,0,0).sync();const _=new G({value:a.frequency,units:"frequency"}).connect(h.frequency),y=new me(t).connect(d.frequency);_.connect(y),e.onPlayBackStarted(b=>{const m=d.toSeconds(b.time);l.triggerAttack(m),d.start(m),h.start(m)}),e.onPlayBackPaused(b=>{const m=d.toSeconds(b);l.triggerRelease(m);const g=m+l.toSeconds(l.release);d.stop(g),h.stop(g)}),e.onPlayBackStopped(b=>{const m=d.toSeconds(b);l.triggerRelease(m);const g=m+l.toSeconds(l.release);d.stop(g),h.stop(g)});const k=ge(o,"mute",!1),{volumeRef:v}=ze(o.volume);function T(){o.dispose()}return fe({generatorName:n,type:"BasicBinauralBeatOsc",muteCtrl:k,volumeCtrl:v,dispose:T})}const dt={rampTime:E.number,signal:{gain:E.number.between(0,2)}},es={rampTime:E.number,signal:{beatFreq:E.number}},ts={rampTime:E.number,signal:{osc:{frequency:E.number}}},ri={rampTime:E.number,signal:{filter:{frequency:E.number}}},li={rampTime:E.number,signal:{filter:{Q:E.number.positive}}},ui={rampTime:E.number,signal:{filter:{gain:E.number}}},ci={rampTime:E.number,signal:{filter:{detune:E.number}}},hi={rampTime:E.number,signal:{filter:{wet:E.number.between(0,1)}}},pi={rampTime:E.number,signal:{spinEffect:E.union(0,1)}},di={rampTime:E.number,signal:{spinCycleFreq:E.number.between(.1,2)}};function ft(n,e,s){if(ct(e)){const{values:i,humanize:t,probability:a,interval:o,pattern:u}=e,l=new $e({pattern:u,values:i,humanize:t,probability:a,interval:o,callback:s});return n.onPlayBackStarted(({initialize:p})=>{p&&l.start()}),n.onPlayBackStopped(p=>l.stop(p)),()=>l.dispose()}return Zt}class Pe extends Ae{constructor(){super(q(Pe.getDefaults(),arguments));z(this,"name","FilterEffect");z(this,"filter");const s=q(Pe.getDefaults(),arguments);this.filter=new ue(s.filter),this.connectEffect(this.filter),W(this,["filter"])}static getDefaults(){return Object.assign(Ae.getDefaults(),{filter:Object.assign(F.getDefaults(),ue.getDefaults())})}}function mt(n,e,s){if(ct(e)){const{startOffsetSeconds:i=0,loop:t,loopEnd:a,loopStart:o,events:u}=e,{duration:l}=Wt(),p=new oe({loop:t,loopEnd:a,loopStart:o,events:fi(l.value,u),callback:s});return n.onPlayBackStarted(({initialize:h})=>{h&&p.start(`+${i}`)}),n.onPlayBackStopped(h=>p.stop(h)),()=>p.dispose()}return Zt}function fi(n,e){return e.map(s=>Ut(s).with({time:E.string.regex(/^\-\d+/)},i=>{const t=parseInt(i.time.slice(1)),a=Object.assign({},i);return a.time=n-t,a}).with({time:E.string.regex(/^%\d+/)},i=>{const t=parseInt(i.time.slice(1)),a=Object.assign({},i);return a.time=n*(t*.01),a}).otherwise(i=>i))}function mi(n,e,s){const{gain:i=1,noise:t,filter:a,loopEvents:o,eventSequence:u}=s;console.debug(`createNoiseFilteredGen ${n} gain %o, opt %o`,i,U(s));const l=new de,p=new P(i),h=new Pe({filter:a}),d=new Me({envelope:{attack:30,decay:0,sustain:1,release:30},noise:t});l.send("main"),d.chain(h,p,l),e.onPlayBackStarted(g=>{d.triggerAttack(g.time)}),e.onPlayBackPaused(g=>{d.triggerRelease(g)}),e.onPlayBackStopped(g=>{d.triggerRelease(g)});function _(g,x,f){if(console.log("%o %o Triggered - Time %o, event.rampTime: %o event.signal %o",g,n,Math.floor(x),f==null?void 0:f.rampTime,U(f==null?void 0:f.signal)),V(dt,f)){const{rampTime:C,signal:w}=f;p.gain.rampTo(w.gain,C,x)}if(V(ri,f)){const{rampTime:C,signal:w}=f;h.filter.frequency.rampTo(w.filter.frequency,C,x)}if(V(li,f)){const{rampTime:C,signal:w}=f;h.filter.Q.rampTo(w.filter.Q,C,x)}if(V(ui,f)){const{rampTime:C,signal:w}=f;h.filter.gain.rampTo(w.filter.gain,C,x)}if(V(ci,f)){const{rampTime:C,signal:w}=f;h.filter.detune.rampTo(w.filter.detune,C,x)}if(V(hi,f)){const{rampTime:C,signal:w}=f;h.wet.rampTo(w.filter.wet,C,x)}}const y=ft(e,o,(g,x)=>_("Loop",g,x)),k=mt(e,u,(g,x)=>_("Event Sequence",g,x)),v=c(()=>`${n} - ${Ht(d.noise.type)}`),T=ge(l,"mute",!1),{volumeRef:b}=ze(l.volume);function m(){l.dispose(),k(),y()}return fe({generatorName:v,type:"NoiseFilteredGen",muteCtrl:T,volumeCtrl:b,dispose:m})}class pe extends Se{constructor(){super(q(pe.getDefaults(),arguments));z(this,"name","BinauralBeatSynth");z(this,"_merge");z(this,"oscillatorL");z(this,"oscillatorR");z(this,"baseFrequency");z(this,"beatFrequency");z(this,"detune");z(this,"envelope");const s=q(pe.getDefaults(),arguments);this.envelope=new Ne(Object.assign({context:this.context},s.envelope)),this._merge=new he,this.oscillatorR=new ae(Object.assign({context:this.context,detune:s.detune},s.oscillator)),this.oscillatorL=new ae(Object.assign({context:this.context,detune:s.detune},s.oscillator)),this.envelope.connect(this.output),this._merge.connect(this.envelope),this.oscillatorR.connect(this._merge,0,0),this.oscillatorL.connect(this._merge,0,1),this.detune=new G({value:s.detune,units:"cents"}).connect(this.oscillatorL.detune).connect(this.oscillatorR.detune);const i=new me(s.beatFrequency).connect(this.oscillatorL.frequency);this.beatFrequency=i.addend,this.baseFrequency=new G({value:s.baseFrequency,units:"frequency"}).connect(i).connect(this.oscillatorR.frequency),W(this,["oscillatorR","oscillatorL","baseFrequency","beatFrequency","detune","envelope"])}static getDefaults(){return Object.assign(Se.getDefaults(),{envelope:Object.assign(Ce(Vt.getDefaults(),Object.keys(F.getDefaults())),{attack:10,decay:0,release:10,sustain:1}),oscillator:Object.assign(Ce(ae.getDefaults(),[...Object.keys(ke.getDefaults()),"frequency","detune"]),{type:"sine"}),detune:0,baseFrequency:180,beatFrequency:6})}triggerAttackRelease(s,i,t){const a=this.toSeconds(i),o=this.toSeconds(s);return this.triggerAttack(a,t),this.triggerRelease(a+o),this}triggerAttack(s,i=1){console.log("this info",this.channelCount),this.log("triggerAttack",s,i);const t=this.toSeconds(s);if(this.envelope.triggerAttack(t,i),this.oscillatorL.start(t),this.oscillatorR.start(t),this.envelope.sustain===0){const a=this.toSeconds(this.envelope.attack),o=this.toSeconds(this.envelope.decay),u=t+a+o;this.oscillatorL.stop(u),this.oscillatorR.stop(u)}return this}triggerRelease(s){this.log("triggerRelease",s);const i=this.toSeconds(s);this.envelope.triggerRelease(i);const t=i+this.toSeconds(this.envelope.release);return this.oscillatorL.stop(t),this.oscillatorR.stop(t),this}dispose(){return super.dispose(),this.oscillatorL.dispose(),this.oscillatorR.dispose(),this.envelope.dispose(),this._merge.dispose(),this}}const gi=0;function _i(n,e,s){const{gain:i,beatFreq:t,osc:a,loopEvents:o,eventSequence:u}=s;console.debug(`createBinauralBeatwLoop ${n} gain %o, opt %o`,i,U(s));const l=new de(gi),p=new P(i),h=new pe({baseFrequency:a.frequency,beatFrequency:t});l.send("main"),h.chain(p,l),e.onPlayBackStarted(m=>{h.triggerAttack(m.time)}),e.onPlayBackPaused(m=>{h.triggerRelease(m)}),e.onPlayBackStopped(m=>{h.triggerRelease(m)});function d(m,g,x){if(console.log("%o %o Triggered - Time %o, event.rampTime: %o event.signal %o",m,n,Math.floor(g),x==null?void 0:x.rampTime,U(x==null?void 0:x.signal)),V(dt,x)){const{rampTime:f,signal:C}=x;p.gain.rampTo(C.gain,f,g)}if(V(es,x)){const{rampTime:f,signal:C}=x;h.beatFrequency.rampTo(C.beatFreq,f,g)}if(V(ts,x)){const{rampTime:f,signal:C}=x;h.baseFrequency.rampTo(C.osc.frequency,f,g)}}const _=ft(e,o,(m,g)=>d("Loop Event",m,g)),y=mt(e,u,(m,g)=>d("Event Sequence",m,g)),k=c(()=>`${n} - ${t}Hz`),v=ge(l,"mute",!1),{volumeRef:T}=ze(l.volume);function b(){l.dispose(),y(),_()}return fe({generatorName:k,type:"BinauralBeatwLoop",muteCtrl:v,volumeCtrl:T,dispose:b})}class gt extends Mt{constructor(){super(q(gt.getDefaults(),arguments));z(this,"name","SpinningPanner");z(this,"panner3d");this.panner3d=new Le,this.connectEffect(this.panner3d),this._lfo.connect(this.panner3d.orientationY)}static getDefaults(){return Object.assign(Mt.getDefaults(),{min:0,max:Math.PI*2,phase:90})}dispose(){return super.dispose(),this.panner3d.dispose(),this}}function vi(n,e,s){const{gain:i,beatFreq:t,spinEffect:a=1,spinCycleFreq:o=.5,osc:u,loopEvents:l,eventSequence:p}=s;console.debug(`createBinauralBeatSpinOsc ${n} gain %o, opt %o`,i,U(s));const h=new de,d=new P(i),_=new gt({wet:a,frequency:o}),y=new pe({baseFrequency:u.frequency,beatFrequency:t});h.send("main"),y.chain(_,d,h),e.onPlayBackStarted(f=>{y.triggerAttack(f.time)}),e.onPlayBackPaused(f=>{y.triggerRelease(f)}),e.onPlayBackStopped(f=>{y.triggerRelease(f)});function k(f,C,w){if(console.log("%o %o Triggered - Time %o, event.rampTime: %o event.signal %o",f,n,Math.floor(C),w==null?void 0:w.rampTime,U(w==null?void 0:w.signal)),V(dt,w)){const{rampTime:j,signal:N}=w;d.gain.rampTo(N.gain,j,C)}if(V(es,w)){const{rampTime:j,signal:N}=w;y.beatFrequency.rampTo(N.beatFreq,j,C)}if(V(ts,w)){const{rampTime:j,signal:N}=w;y.baseFrequency.rampTo(N.osc.frequency,j,C)}if(V(pi,w)){const{rampTime:j,signal:N}=w;_.wet.rampTo(N.spinEffect,j,C)}if(V(di,w)){const{rampTime:j,signal:N}=w;_.frequency.rampTo(N.spinCycleFreq,j,C)}}const v=ft(e,l,(f,C)=>k("Loop Event",f,C)),T=mt(e,p,(f,C)=>k("Event Sequence",f,C)),b=c(()=>`${n} - ${t}Hz`),m=ge(h,"mute",!1),{volumeRef:g}=ze(h.volume);function x(){h.dispose(),T(),v()}return fe({generatorName:b,type:"BinauralBeatSpinOsc",muteCtrl:m,volumeCtrl:g,dispose:x})}function yi(n,e){let s=0,i=0;return n.map(t=>Ut(t).with({type:"BasicNoiseGen"},a=>(s++,ai(`Noise #${s}`,e,a.options))).with({type:"BasicBinauralBeatOsc"},a=>(i++,oi(`Binaural Osc #${i}`,e,a.options))).with({type:"NoiseFilteredGen"},a=>(s++,mi(`Noise #${s}`,e,a.options))).with({type:"BinauralBeatwLoop"},({options:a})=>(i++,_i(`Binaural Osc #${i}`,e,a))).with({type:"BinauralBeatSpinOsc"},({options:a})=>(i++,vi(`Binaural Spin Osc #${i}`,e,a))).otherwise(a=>(console.log("Unknow Generator %o",a),null))).filter(bi)}function bi(n){return n!=null}const xi=n=>(bn("data-v-3896fab3"),n=n(),xn(),n),ki={class:"text-h6"},wi={class:"absolute-full flex flex-center"},Si=xi(()=>ie("div",{class:"text-subtitle2"},"Sound Generators",-1)),Ci=ot({__name:"play",setup(n){const{currentProgram:e,initializeProgram:s}=Sn();s();const{isPlaying:i,toggleIsPlaying:t,eventHandler:a}=fn(),{remandingDuration:o,remandingDurationPercentage:u}=Wt(),l=c(()=>i.value?"pause":"play_arrow"),p=c(()=>i.value?"pause":"play"),h=c(()=>`${o.value.hours}:${o.value.minutes}:${o.value.seconds+1}`),{volumeRef:d}=Cn();function _(b){console.log("updateVol %o",b),d.value=b}const y=Q(null);async function k(){v("Main Volume",d.value,_)}async function v(b,m,g){ct(y)&&(await y.value.reveal({title:b,volume:m,updateVolume:g}),console.log("vol %o",d.value))}const T=c(()=>{var m;const b=((m=e.value)==null?void 0:m.generators)??[];return yi(b,a)});return ut(()=>{T.value.forEach(b=>b.dispose()),dn.stop("+0.1")}),(b,m)=>{const g=An,x=Es;return ne(),Te(x,{color:"bg-purple"},{header:M(()=>{var f;return[ie("div",ki,De((f=A(e))==null?void 0:f.title),1)]}),default:M(()=>[R(rt,{align:"center",class:"q-pt-md playToggle_section"},{default:M(()=>[R(Oe,{onClick:m[0]||(m[0]=f=>A(t)()),class:"btn-fixed-width playToggle_section_btn",color:"green",label:A(p),icon:A(l),padding:"4px 20px 4px 12px",size:"1rem"},null,8,["label","icon"]),R(Oe,{onClick:m[1]||(m[1]=f=>k()),round:"",color:"secondary",icon:"tune",class:"playToggle_section_vol"})]),_:1}),R(Vn,null,{default:M(()=>[mn(ie("div",null,[R(Ot,{dark:""}),R(Nn,{size:"25px",value:A(u),color:"accent"},{default:M(()=>[ie("div",wi,[R(Kt,{color:"white","text-color":"accent",label:A(h)},null,8,["label"])])]),_:1},8,["value"])],512),[[gn,A(i)]])]),_:1}),R(Ot,{dark:""}),R(It,{class:"sg-container"},{default:M(()=>[Si,(ne(!0),_n(yn,null,vn(A(T),f=>(ne(),Te(g,{name:f.generatorName,type:f.type,"mute-ctrl":f.muteCtrl,"onUpdate:muteCtrl":C=>f.muteCtrl=C,onShowVolumeDialog:C=>v(`${f.generatorName} Volume`,f.volumeCtrl,w=>f.volumeCtrl=w)},null,8,["name","type","mute-ctrl","onUpdate:muteCtrl","onShowVolumeDialog"]))),256))]),_:1}),R(Jn,{ref_key:"volumeDialogRef",ref:y},null,512)]),_:1})}}});const Bi=qn(Ci,[["__scopeId","data-v-3896fab3"]]);export{Bi as default};
